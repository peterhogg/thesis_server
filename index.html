<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Peter's Thesis - powered by reveal.js</title>

		<meta name="description" content="A framework for easily creating beautiful presentations using HTML">
		<meta name="author" content="Hakim El Hattab">

		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css" id="theme">

		<link rel="stylesheet" href="css/thesis.css">



		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div id="results">
			<div id="likes"></div>
			<div id="understand"></div>
		</div>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
					<slideTitle>Title Card</slideTitle>
                    <!-- suggestion: -->
                    <topic title="introduction"
                           description="This is the introduction to Peter's thesis">
                        <interesting />
                        <difficulty min="1" max="2" />
                        <quiz>
                            <question type="multiple_choice" text="What is my name?">
                                <answer text="Peter Hoggarth" correct="true" />
                                <answer text="Charles Xavier" />
                                <answer text="Peter Parker" />
                            </question>
                        </quiz>
                    </topic>
                    <!-- -->
					<h1>Peter's Thesis</h1>
					<h3>Powered by reveal.js</h3>
				</section>


				<section>
					<topic title="Thesis Midway Presentation"
					       description="Peter Hoggarth Supervised by Ken Pu, and Randy Fortier">
					</topic>
					<h1>Thesis Midway Presentation</h1>
					<h3>Peter Hoggarth <br /> Supervisors: </br> Ken Pu, Randy Fortier</h3>
				</section>

				<section>
					<topic title="Problem"
					       description="Using technology to enrich classroom interactions between proffessors and students">
					    <interesting />
					    <difficulty min="1" max="2" />
					</topic>
					<h1>Problem</h1>
					<p>Using technology to enrich classroom interactions between proffessors and students</p>
				</section>

				<section>
					<topic title="Proposed Solution"
					       description="Proffesors use revealJS, students provide feedback on their phones">
					    <interesting />
					    <difficulty min="1" max="10" />
					</topic>
					<h1>Proposed Solution</h1>
					<p>Proffessors will show slides using revealJS <br /> Reveal slides will dynamically send messages to the server </br> students connected to the server will be able to receive messages, and interact</p>
				</section>

				<section>
					<topic title="Outline of Technology Stack"
					       description="Android, SocketIO, NodeJS, RevealJS">
					    <interesting />
					</topic>
					<h1>Outline of Technology Stack</h1>
					<p>Android <br /> SocketIO <br/> NodeJS <br /> RevealJS</p>
				</section>

				<section>
					<topic title="Android"
					       description="Front end for students
			 Opportunity for interaction will open up as lecture progresses
			 Students able to send feedback through their phone
			 Use of phone to answer multiple choice questions">
					    <interesting />
					    <difficulty min="1" max="10" />
					</topic>
					<h1>Android</h1>
					<p>Front end for students
Opportunity for interaction will open up as lecture progresses
Students able to send feedback through their phone
Use of phone to answer multiple choice questions</p>
				</section>

				<section>
					<topic title="SocketIO"
					       description="Socket IO websockets for sending data back and forth
			 Bidirectional flow allows for prompts to be sent to and from students, and the server IE questions can be sent to the student, and answers can be sent back
			 Real time interactions, so feedback such as questions will become available in real time">
					    <interesting />
					    <difficulty min="1" max="10" />
					</topic>
					<h1>SocketIO</h1>
					<p>Socket IO websockets for sending data back and forth
Bidirectional flow allows for prompts to be sent to and from students, and the server IE questions can be sent to the student, and answers can be sent back
Real time interactions, so feedback such as questions will become available in real time</p>
				</section>

				<section>
					<topic title="NodeJS"
					       description="NodeJS will handle static content for the lecture note slides
			 The server will also manage socket connections
			 Store any state variables">
					    <interesting />
					    <difficulty min="1" max="10" />
					</topic>
					<h1>NodeJS</h1>
					<p>NodeJS will handle static content for the lecture note slides
The server will also manage socket connections
Store any state variables</p>
				</section>

				<section>
					<topic title="RevealJS"
					       description="Reveal will be used to display the lecture slides that are being shown
			 There will be custom javascript to accompany the slide show to send the server notifications on specific events ie quiz slide displayed">
					    <interesting />
					    <difficulty min="1" max="10" />
					</topic>
					<h1>RevealJS</h1>
					<p>Reveal will be used to display the lecture slides that are being shown
There will be custom javascript to accompany the slide show to send the server notifications on specific events ie quiz slide displayed</p>
				</section>

				<section>
					<topic title="Work done so far"
					       description="Event Driven Android
			 Send messages from phone to server
			 Adding in socketIO to reveal JS">
					</topic>
					<h1>Work Done So Far</h1>
					<p>Event Driven Android
Send messages from phone to server
Adding in socketIO to reveal JS</p>
				</section>

				<section>
					<topic title="Work to be done"
					       description="Send message from revealJS to android application              - Jan 22nd
			 Open up discussion topics on android app when slide is hit  -  Feb 05th
			 Send multiple choice questions to android application           -  Feb 19th
			 Code Freeze                                                                                     - March 1st">
					</topic>
					<h1>Work To Be Done
</h1>
					<p>Send message from revealJS to android application              - Jan 22nd
Open up discussion topics on android app when slide is hit  -  Feb 05th
Send multiple choice questions to android application           -  Feb 19th
Code Freeze                                                                                     - March 1st</p>
				</section>

				<section>
					<topic title="Questions"
					       description="Questions?">
					</topic>
					<h1>Questions?</h1>
				</section>



			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>
		<script src="https://cdn.socket.io/socket.io-1.3.7.js"></script>

		<script>

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			//var socket = io('https://cryptic-brushlands-8704.herokuapp.com');
			var socket = io('http://localhost:5000')
			var slideIndex;
			socket.on("newLike",function(data){
				var likeObject = data[slideIndex];
				var likes = 0;
				for (var user in likeObject){
					if(likeObject[user] ==true){
						++likes;
					}
				}
				console.log(likes);
				var results = document.getElementById("likes");
				results.innerHTML = likes + " Likes"
				

			});
			socket.on("newUnderstanding",function(data){
				console.log("new understanding" + JSON.stringify(data))
				var understandObject = data[slideIndex];
				var understandTotal = 0;
				var userTotal = 0;
				for (var user in understandObject){
					userTotal ++;
					understandTotal += understandObject[user];
				}
				console.log(understandTotal + "/" + userTotal);
				console.log(likes);
				var results = document.getElementById("understand");
				results.innerHTML = "Average Understanding: " + Math.floor((understandTotal/userTotal) * 100) + "%"
			});



			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// Optional reveal.js plugins
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});

			//Event Listner for slide change
			Reveal.addEventListener( 'slidechanged', function( event ) {

				//Clear likes on slide change
				var results = document.getElementById("likes");
				var understandResults = document.getElementById("understand");
				results.innerHTML = ""
				understandResults.innerHTML = ""
    			// event.previousSlide, event.currentSlide, event.indexh, event.indexv
    			var slide = event.currentSlide;

					//Using new data in slide example
					var data = {};

					var slideData = slide.getElementsByTagName("topic");
					if( slideData.length > 0){
						slideData = slideData[0]
						var title = slideData.getAttribute("title");
						var description = slideData.getAttribute("description");

						data.title = title;
						slideIndex = title;
						data.description = description;

						var interesting =slideData.getElementsByTagName("interesting");
						if(interesting.length > 0){
							data.interesting = true;
						}
						else {
							data.interesting = false;
						}

						var difficulty = slideData.getElementsByTagName("difficulty");
						if (difficulty.length > 0){
							var difficultyMin = difficulty[0].getAttribute("min")
							var difficultyMax = difficulty[0].getAttribute("max")

							data.difficulty = true;
							data.maxDifficulty = difficultyMax
							data.minDifficulty = difficultyMin
						}
						else{
							data.difficulty = false;
						}

						var quiz = slideData.getElementsByTagName("quiz");
						if (quiz.length > 0) {
							data.quiz = true;
							quiz = quiz[0]
							var questionData = quiz.getElementsByTagName("question")[0];
							var question = {type: questionData.getAttribute("type"), text: questionData.getAttribute("text")}
							var answerData = questionData.getElementsByTagName("answer")
							var answers = []
							for (i = 0; i < answerData.length; i++){
								var text = answerData[i].getAttribute("text");
								var correct = answerData[i].getAttribute("correct");
								correct = (correct === null) ? false : correct;
								answers[i] = {text: text, correct: correct}
							}

							data.question = question;
							data.answers = answers;
						}
						else{
							data.quiz = false;
						}


						console.log(JSON.stringify(data))

						socket.emit("topic",data)
					}










			} );

		</script>

	</body>
</html>
